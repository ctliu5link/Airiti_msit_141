<html>
<head>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/css/bootstrap-grid.min.css" rel="stylesheet" />
</head>
<body>
    <div class="panel-group" role="tablist">
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="collapseListGroupHeading">
                <h4 class="panel-title">
                    <a class="collapsed" role="button" data-toggle="collapse" href="#collapseListGroup" aria-expanded="false" aria-controls="collapseListGroup">
                        Let's Connect
                    </a>
                </h4>
            </div>
            <div id="collapseListGroup" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading" aria-expanded="false" style="height: 0px;">
                <div class="well">
                    <form method="post" action="/SchemaNotes/DBConnection" novalidate="novalidate" name="userInfo">
                        <div class="form-group ">
                            <div class="row">
                                <div class="col-2"> <span >uid</span></div>
                                <div class="col-2"> <span>pwd</span></div>
                                <div class="col-2"> <span>database</span></div>
                                <div class="col-2"> <span>server</span></div>
                            </div>
                            <div class="row">
                                <div class="col-2"> <input type="text" class="form-control" name="uid"> </div>
                                <div class="col-2"> <input type="text" class="form-control" name="pwd"> </div>
                                <div class="col-2"> <input type="text" class="form-control" name="database"> </div>
                                <div class="col-2"> <input type="text" class="form-control" name="server"> </div>
                                <div class="col-2">
                                    <button type="submit" class="btn btn-primary">連線</button>
                                </div>
                                <div class="col-2">
                                    <button type="button" id="defaultConnStrings"class="btn btn-primary">設為預設值</button>
                                </div>
                            </div>
                        </div>

                        <button style="color: darkgray; background-color: lightgray;" type="button" class="btn" onclick="$('#ConnectionString').val('Server=.;Database=AdventureWorks;Trusted_Connection=True')">自動填寫ConnectionString</button>
                        <button style="color: transparent; background-color: transparent;" type="button" class="btn" onclick="$('#ConnectionString').val('Server=linkliu.hopto.org;Initial Catalog=AdventureWorks;User ID=sa;Password=1234')">自動填寫ConnectionString</button>
                        <input name="__RequestVerificationToken" type="hidden" value="CfDJ8Fa3A4DBxnNJj1MDsCOcDsg2yhf4ITJxRDtvGh8-5yqz1AzypSlk44mAw7SF527KiuuqCAA5K_IevIVIvLaVSZrvOg6qt0s2ZLZ08m1gv6qpsEr6ZelCFxkr590R2t9lEG3Ap--lg9gGdOSfM1RLOSk">
                    </form>
                </div>
            </div>
        </div>
    </div>



    <div class="container body-content">
        <h2>Index</h2>

        <hr>
        <br>
        <ul>
            <li>
                <strong>工具介紹</strong>
                <p>SchemaNote（以下簡稱本平台）是用來檢視、編輯SQL Server上自定義註記之Web平台</p>
                <br>
            </li>
            <li>
                <strong>原理說明</strong>
                <p>本平台註記原理在於利用資料庫物件的<mark title="Extended Property"><a title="前往擴充屬性官方說明" href="https://docs.microsoft.com/en-us/sql/relational-databases/system-catalog-views/extended-properties-catalog-views-sys-extended-properties">擴充屬性</a></mark></p>
                <br>
            </li>
            <li>
                <strong>注意事項</strong>
                <ul>
                    <li>建議使用SQL Server版本2008(含)以上，版本2005以下可使用另一套開源工具<a title="前往DDC官方說明" href="https://archive.codeplex.com/?p=datadictionary">DDC</a></li>
                    <li>本平台僅異動擴充屬性，不能控制其他資料庫物件、結構</li>
                    <li>目前只支援資料表(Table)、檢視表(View)這兩種物件</li>
                    <li>目前尚未支援SSL的版本，連線字串傳送過程亦無受到保護，請於受保護的網路環境（e.g. 安全內網環境）使用</li>
                </ul>
            </li>
        </ul>
        <hr>
        <footer>
            <p>© 2019 - SchemaNote (Version: 0.1.3)</p>
        </footer>
    </div>
    <script>
           btn.addEventListener('click', (event) =>
        {
            event.preventDefault();
            const formData = new FormData(document.userInfo);
            fetch('@Url.Content("~/SchemaNotes/defaultConnstrings")', { method: "post", body: formData }).then(response=>response.text()).then(data=>divInfo.innerHTML=data)
            });
    </script>
</body>
</html>
